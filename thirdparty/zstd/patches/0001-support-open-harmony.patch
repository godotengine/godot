diff --git a/thirdparty/zstd/common/portability_macros.h b/thirdparty/zstd/common/portability_macros.h
index 860734141d..6dcd01e257 100644
--- a/thirdparty/zstd/common/portability_macros.h
+++ b/thirdparty/zstd/common/portability_macros.h
@@ -113,7 +113,7 @@
  * Disable assembly when MSAN is enabled, because MSAN requires
  * 100% of code to be instrumented to work.
  */
-#if defined(__GNUC__)
+#if defined(__GNUC__) && !defined(__OPEN_HARMONY__)
 #  if defined(__linux__) || defined(__linux) || defined(__APPLE__) || defined(_WIN32)
 #    if ZSTD_MEMORY_SANITIZER
 #      define ZSTD_ASM_SUPPORTED 0
